#!/bin/sh
# -------------------------------------- #
# I2C control script for a AQM0802A LCD  #
# This is the LCD display test program.  #
#                                        #
# 2015-12-21 support@frank4dd.com        #
# -------------------------------------- #

# 0-0x30 1-0x31 2-0x32 3-0x33 4-0x34
# 5-0x35 6-0x36 7-0x37 8-0x38 9-0x39
# 
# A-0x41 B-0x42 C-0x43 D-0x44 E-0x45
# F-0x46 G-0x47 H-0x48 I-0x49 J-0x4a
# K-0x4b L-0x4c M-0x4d N-0x4e O-0x4f
# P-0x50 Q-0x51 R-0x52 S-0x53 T-0x54
# U-0x55 V-0x56 W-0x57 X-0x58 Y-0x59
# Z-0x5a

# a-0x61 b-0x62 c-0x63 d-0x64 e-0x65
# f-0x66 g-0x67 h-0x68 i-0x69 j-0x6a
# k-0x6b l-0x6c m-0x6d n-0x6e o-0x6f
# p-0x70 q-0x71 r-0x72 s-0x73 t-0x74
# u-0x75 v-0x76 w-0x77 x-0x78 y-0x79
# z-0x7a

# LCD initialization
# 0x38 sets RS-0 RW-0 DB7-0 DB6-0 DB5-1 DB4-1 DB3-1 DB2-0 DB1-0 DB0-0
# this means 8-bit, 2-line, font 5x8, normal instruction set
# 0x39 sets RS-0 RW-0 DB7-0 DB6-0 DB5-1 DB4-1 DB3-1 DB2-0 DB1-0 DB0-1
# same as above, with extended instruction set on
# 0x14 sets RS-0 RW-0 DB7-0 DB6-0 DB5-0 DB4-1 DB3-0 DB2-1 DB1-0 DB0-0
# this is the internal OSC frequency
# 0x78 sets RS-0 RW-0 DB7-0 DB6-0 DB5-0 DB4-1 DB3-0 DB2-1 DB1-0 DB0-0
# this is the internal OSC frequency

# Initialisation Routine
i2cset -y 2 0x3e 0 0x38 0x39 0x14 0x70 0x56 0x6c i
sleep 0.3

# send "Display On, No Cursor, No Blinking" 0x0c (12) and "Clear Display" 0x01
i2cset -y 2 0x3e 0 0x38 0x0c i
i2cset -y 2 0x3e 0 0x01 i
sleep 0.3

# send "Entry mode: Incremental Move"
i2cset -y 2 0x3e 0 0x06 i
sleep 0.3

# Line 1 output, remember data starts with 0x40, commands with 0
i2cset -y 2 0x3e 0 0x80 b # Display On
i2cset -y 2 0x3e 0x40 0x65 0x74 0x68 0x30 0x20 0x49 0x50 i

# Line 2 output "Address"
i2cset -y 2 0x3e 0 0xc0 b
i2cset -y 2 0x3e 0x40 0x41 0x44 0x44 0x52 0x45 0x53 0x53 i

sleep 4
# Line 1 output
i2cset -y 2 0x3e 0 0x01 b
i2cset -y 2 0x3e 0x40 0x31 0x39 0x32 0x2e 0x31 0x36 0x38 0x2e i

# Line 2 output
i2cset -y 2 0x3e 0 0xc0 b
i2cset -y 2 0x3e 0x40 0x31 0x30 0x30 0x2e 0x31 0x30 0x33 i

sleep 4 
# Line 1 output "wlan0 IP"
i2cset -y 2 0x3e 0 0x80 b # Display On
i2cset -y 2 0x3e 0x40 0x77 0x6c 0x61 0x6e 0x30 0x20 0x49 0x50 i

# Line 2 output "Address"
i2cset -y 2 0x3e 0 0xc0 b
i2cset -y 2 0x3e 0x40 0x41 0x44 0x44 0x52 0x45 0x53 0x53 i

sleep 4
# Line 1 output
i2cset -y 2 0x3e 0 0x01 b
i2cset -y 2 0x3e 0x40 0x31 0x39 0x32 0x2e 0x31 0x36 0x38 0x2e i

# Line 2 output
i2cset -y 2 0x3e 0 0xc0 b
i2cset -y 2 0x3e 0x40 0x31 0x30 0x30 0x2e 0x31 0x30 0x33 i
